(()=>{"use strict";let e="",t="module";function n(...n){return n=n.filter((e=>"string"==typeof e)),`${t}s/${e}/templates/${n.join("/")}`}function i(t,n,i){return t.getFlag(e,n)??i}function o(t,n,i){return t.setFlag(e,n,i)}function c(e,t,n,i){const o="string"==typeof t?t:"info",c="object"==typeof t?t:"object"==typeof n?n:void 0,s="boolean"==typeof t?t:"boolean"==typeof n?n:i??!1;ui.notifications.notify(r(e,c),o,{permanent:s})}function r(...t){let[n,i]=t;return n=`${e}.${n}`,i?game.i18n.format(n,i):game.i18n.localize(n)}function s(t){const n=(...e)=>r(`${t}.${e[0]}`,e[1]);return Object.defineProperties(n,{warn:{value:(...e)=>function(...e){const[t,n,i]=e;c(t,"warning",n,i)}(`${t}.${e[0]}`,e[1],e[2]),enumerable:!1,configurable:!1},info:{value:(...e)=>function(...e){const[t,n,i]=e;c(t,"info",n,i)}(`${t}.${e[0]}`,e[1],e[2]),enumerable:!1,configurable:!1},error:{value:(...e)=>function(...e){const[t,n,i]=e;c(t,"error",n,i)}(`${t}.${e[0]}`,e[1],e[2]),enumerable:!1,configurable:!1},has:{value:n=>function(t){return game.i18n.has(`${e}.${t}`,!1)}(`${t}.${n}`),enumerable:!1,configurable:!1},path:{value:n=>function(t){return`${e}.${t}`}(`${t}.${n}`),enumerable:!1,configurable:!1},template:{value:(e,{hash:t})=>n(e,t),enumerable:!1,configurable:!1}}),n}class EditLores extends FormApplication{constructor(e,t={}){super(e,{...t,id:`npc-edit-lores-${e.id}`})}static get defaultOptions(){return mergeObject(super.defaultOptions,{title:"Edit Lores",template:n("edit-lores.hbs"),width:400})}getData(e){const t=this.object;return mergeObject(super.getData(e),{unspecified:i(t,"unspecified")??"",specific:i(t,"specific")??"",i18n:s("templates.editLore")})}async _updateObject(e,{unspecified:t,specific:n}){const i=this.object;o(i,"unspecified",t.trim()),o(i,"specific",n.trim())}activateListeners(e){e.find("button.cancel").on("click",this.#e.bind(this))}#e(e){e.preventDefault(),this.close()}}function a(e,t){const n=e.actor;!function(e,t){const n=i(e,"unspecified"),o=i(e,"specific");if(!n&&!o)return;const c=e.identificationDCs.lore,r=u(t,"body","");function s(e,{dc:t,start:n}){const i=e.split(",").filter((e=>e.trim())).map((e=>function(e,t,n){return`<div class="tag-legacy identification-skills tooltipstered">${game.i18n.format("PF2E.Actor.NPC.Identification.Skills.Label",{skills:e,dc:t,adjustment:n})}</div>`}(e,t,n))).join("");r.append(i)}r.find(".identification-skills").last().remove(),s(n||"Unspecific",c[0]),s(o||"Specific",c[1])}(n,t),u(t,"header","button").before('<button type="button" class="breakdown edit">Edit</button>'),function(e,t){u(t,"header","button.edit").on("click",(()=>function(e){new EditLores(e).render(!0)}(e)))}(n,t)}function u(e,t,n){return e.find(`[data-tab="main"] .recall-knowledge ${"header"===t?".section-header":".section-body"} ${n}`)}!function(n,i=!1){e||(e="pf2e-npc-knowledges"),t=i?"system":"module"}(),Hooks.once("ready",(()=>{game.user.isGM&&Hooks.on("renderNPCSheetPF2e",a)}))})();
//# sourceMappingURL=main.js.map